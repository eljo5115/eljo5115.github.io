var teamData = {
    "ATL":{
        "Team":{
            "name":"Atlanta Hawks",
            "Win %":0.524,
            "Salary Cap":"$147,411,722",
            "Top 3":0.45
        },
        "Players":[
            {
                "name":"John Collins",
                "salary":"$25,083,744",
                "salary_percent":"17.02%"
            },
            {
                "name":"Danilo Gallinari",
                "salary":"$22,329,985",
                "salary_percent":"15.15%"
            },
            {
                "name":"Bogdan Bogdanovic",
                "salary":"$19,630,756",
                "salary_percent":"13.32%"
            },
            {
                "name":"Clint Capela",
                "salary":"$19,198,277",
                "salary_percent":"13.02%"
            },
            {
                "name":"Trae Young",
                "salary":"$9,080,829",
                "salary_percent":"6.16%"
            }
        ]
    },
    "BOS":{
        "Team":{
            "name":"Boston Celtics",
            "Win %":0.622,
            "Salary Cap":"$148,929,426",
            "Top 3":0.60
        },
        "Players":[
            {
                "name":"Jayson Tatum",
                "salary":"$30,649,609",
                "salary_percent":"20.58%"
            },
            {
                "name":"Al Horford",
                "salary":"$29,446,134",
                "salary_percent":"19.77%"
            },
            {
                "name":"Jaylen Brown",
                "salary":"$29,183,222",
                "salary_percent":"19.60%"
            },
            {
                "name":"Derrick White",
                "salary":"$17,099,011",
                "salary_percent":"11.48%"
            },
            {
                "name":"Marcus Smart",
                "salary":"$15,093,090",
                "salary_percent":"10.13%"
            }
        ]
    },
    "BRK":{
        "Team":{
            "name":"Brooklyn Nets",
            "Win %":0.537,
            "Salary Cap":"$190,649,447",
            "Top 3":0.63
        },
        "Players":[
            {
                "name":"Kevin Durant",
                "salary":"$45,825,710",
                "salary_percent":"24.04%"
            },
            {
                "name":"Kyrie Irving",
                "salary":"$38,529,394",
                "salary_percent":"20.21%"
            },
            {
                "name":"Ben Simmons",
                "salary":"$35,994,012",
                "salary_percent":"18.88%"
            },
            {
                "name":"Joe Harris",
                "salary":"$18,929,658",
                "salary_percent":"9.93%"
            },
            {
                "name":"Seth Curry",
                "salary":"$8,951,099",
                "salary_percent":"4.70%"
            }
        ]
    },
    "CHO":{
        "Team":{
            "name":"Charlotte Hornets",
            "Win %":0.524,
            "Salary Cap":"$133,205,107",
            "Top 3":0.49
        },
        "Players":[
            {
                "name":"Gordon Hayward",
                "salary":"$32,636,132",
                "salary_percent":"24.50%"
            },
            {
                "name":"Terry Rozier",
                "salary":"$19,527,436",
                "salary_percent":"14.66%"
            },
            {
                "name":"Kelly Oubre",
                "salary":"$13,087,170",
                "salary_percent":"9.82%"
            },
            {
                "name":"Montrezl Harrell",
                "salary":"$10,601,590",
                "salary_percent":"7.96%"
            },
            {
                "name":"Mason Plumlee",
                "salary":"$10,086,209",
                "salary_percent":"7.57%"
            }
        ]
    },
    "CHI":{
        "Team":{
            "name":"Chicago Bulls",
            "Win %":0.561,
            "Salary Cap":"$148,412,668",
            "Top 3":0.51
        },
        "Players":[
            {
                "name":"Demar DeRozan",
                "salary":"$28,355,537",
                "salary_percent":"19.11%"
            },
            {
                "name":"Nikola Vucevic",
                "salary":"$26,174,341",
                "salary_percent":"17.64%"
            },
            {
                "name":"Zach LaVine",
                "salary":"$21,266,652",
                "salary_percent":"14.33%"
            },
            {
                "name":"Lonzo Ball",
                "salary":"$20,290,187",
                "salary_percent":"13.67%"
            },
            {
                "name":"Derrick Jones",
                "salary":"$10,601,590",
                "salary_percent":"7.14%"
            }
        ]
    },
    "CLE":{
        "Team":{
            "name":"Cleveland Cavaliers",
            "Win %":0.537,
            "Salary Cap":"$148,742,131",
            "Top 3":0.50
        },
        "Players":[
            {
                "name":"Kevin Love",
                "salary":"$34,090,178",
                "salary_percent":"22.92%"
            },
            {
                "name":"Jarrett Allen",
                "salary":"$21,811,951",
                "salary_percent":"14.66%"
            },
            {
                "name":"Caris LeVert",
                "salary":"$19,085,457",
                "salary_percent":"12.83%"
            },
            {
                "name":"Lauri Markkanen",
                "salary":"$17,112,467",
                "salary_percent":"11.50%"
            },
            {
                "name":"Cedi Osman",
                "salary":"$8,870,194",
                "salary_percent":"5.96%"
            }
        ]
    },
    "DET":{
        "Team":{
            "name":"Detroit Pistons",
            "Win %":0.28,
            "Salary Cap":"$142,999,530",
            "Top 3":0.47
        },
        "Players":[
            {
                "name":"Blake Griffin",
                "salary":"$32,460,683",
                "salary_percent":"22.70%"
            },
            {
                "name":"Jerami Grant",
                "salary":"$21,814,678",
                "salary_percent":"15.26%"
            },
            {
                "name":"Kelly Olynyk",
                "salary":"$13,299,970",
                "salary_percent":"9.30%"
            },
            {
                "name":"Marvin Bagley",
                "salary":"$12,336,964",
                "salary_percent":"8.63%"
            },
            {
                "name":"Cade Cunningham",
                "salary":"$10,960,636",
                "salary_percent":"7.66%"
            }
        ]
    },
    "IND":{
        "Team":{
            "name":"Indiana Pacers",
            "Win %":0.305,
            "Salary Cap":"$150,700,383",
            "Top 3":0.45
        },
        "Players":[
            {
                "name":"Buddy Hield",
                "salary":"$25,163,613",
                "salary_percent":"16.70%"
            },
            {
                "name":"Malcolm Brogdon",
                "salary":"$23,665,967",
                "salary_percent":"15.70%"
            },
            {
                "name":"Myles Turner",
                "salary":"$19,630,756",
                "salary_percent":"13.03%"
            },
            {
                "name":"Ricky Rubio",
                "salary":"$19,412,636",
                "salary_percent":"12.88%"
            },
            {
                "name":"TJ Warren",
                "salary":"$14,112,332",
                "salary_percent":"9.36%"
            }
        ]
    },
    "MIA":{
        "Team":{
            "name":"Miami Heat",
            "Win %":0.646,
            "Salary Cap":"$153,600,014",
            "Top 3":0.65
        },
        "Players":[
            {
                "name":"Jimmy Butler",
                "salary":"$39,279,180",
                "salary_percent":"25.57%"
            },
            {
                "name":"Bam Adebayo",
                "salary":"$30,649,609",
                "salary_percent":"19.95%"
            },
            {
                "name":"Kyle Lowry",
                "salary":"$29,428,824",
                "salary_percent":"19.16%"
            },
            {
                "name":"Duncan Robinson",
                "salary":"$17,067,852",
                "salary_percent":"11.11%"
            },
            {
                "name":"PJ Tucker",
                "salary":"$7,634,183",
                "salary_percent":"4.97%"
            }
        ]
    },
    "MIL":{
        "Team":{
            "name":"Milwaukee Bucks",
            "Win %":0.622,
            "Salary Cap":"$175,450,332",
            "Top 3":0.66
        },
        "Players":[
            {
                "name":"Giannis Antetokounmpo",
                "salary":"$42,909,452",
                "salary_percent":"24.46%"
            },
            {
                "name":"Khris Middleton",
                "salary":"$38,716,214",
                "salary_percent":"22.07%"
            },
            {
                "name":"Jrue Holiday",
                "salary":"$33,995,380",
                "salary_percent":"19.38%"
            },
            {
                "name":"Brook Lopez",
                "salary":"$14,507,483",
                "salary_percent":"8.27%"
            },
            {
                "name":"Serge Ibaka",
                "salary":"$10,601,590",
                "salary_percent":"6.04%"
            }
        ]
    },
    "NYK":{
        "Team":{
            "name":"New York Knicks",
            "Win %":0.451,
            "Salary Cap":"$131,574,134",
            "Top 3":0.42
        },
        "Players":[
            {
                "name":"Julius Randle",
                "salary":"$21,593,832",
                "salary_percent":"16.41%"
            },
            {
                "name":"Evan Fournier",
                "salary":"$18,695,958",
                "salary_percent":"14.21%"
            },
            {
                "name":"Derrick Rose",
                "salary":"$14,663,215",
                "salary_percent":"11.14%"
            },
            {
                "name":"Alec Burks",
                "salary":"$10,399,938",
                "salary_percent":"7.90%"
            },
            {
                "name":"Nerlens Noel",
                "salary":"$9,597,258",
                "salary_percent":"7.29%"
            }
        ]
    },
    "ORL":{
        "Team":{
            "name":"Orlando Magic",
            "Win %":0.268,
            "Salary Cap":"$138,273,195",
            "Top 3":0.43
        },
        "Players":[
            {
                "name":"Gary Harris",
                "salary":"$22,828,544",
                "salary_percent":"16.51%"
            },
            {
                "name":"Jonathan Isaac",
                "salary":"$18,976,397",
                "salary_percent":"13.72%"
            },
            {
                "name":"Markelle Fultz",
                "salary":"$17,994,860",
                "salary_percent":"13.01%"
            },
            {
                "name":"Terrence Ross",
                "salary":"$13,632,469",
                "salary_percent":"9.86%"
            },
            {
                "name":"Mo Bamba",
                "salary":"$8,254,452",
                "salary_percent":"5.97%"
            }
        ]
    },
    "PHI":{
        "Team":{
            "name":"Philadelphia 76ers",
            "Win %":0.622,
            "Salary Cap":"$162,415,018",
            "Top 3":0.75
        },
        "Players":[
            {
                "name":"James Harden",
                "salary":"$48,325,294",
                "salary_percent":"29.75%"
            },
            {
                "name":"Tobias Harris",
                "salary":"$39,257,095",
                "salary_percent":"24.17%"
            },
            {
                "name":"Joel Embiid",
                "salary":"$34,440,406",
                "salary_percent":"21.21%"
            },
            {
                "name":"Danny Green",
                "salary":"$10,905,975",
                "salary_percent":"6.71%"
            },
            {
                "name":"Furkan Korkmaz",
                "salary":"$5,049,063",
                "salary_percent":"3.11%"
            }
        ]
    },
    "TOR":{
        "Team":{
            "name":"Toronto Raptors",
            "Win %":0.585,
            "Salary Cap":"$147,117,769",
            "Top 3":0.51
        },
        "Players":[
            {
                "name":"Pascal Siakam",
                "salary":"$35,994,012",
                "salary_percent":"24.47%"
            },
            {
                "name":"Fred VanVleet",
                "salary":"$21,458,517",
                "salary_percent":"14.59%"
            },
            {
                "name":"Gary Trent Jr",
                "salary":"$17,694,945",
                "salary_percent":"12.03%"
            },
            {
                "name":"OG Anunoby",
                "salary":"$17,527,461",
                "salary_percent":"11.91%"
            },
            {
                "name":"Thaddeus Young",
                "salary":"$15,475,579",
                "salary_percent":"10.52%"
            }
        ]
    },
    "WSH":{
        "Team":{
            "name":"Washington Wizards",
            "Win %":0.427,
            "Salary Cap":"$139,618,062",
            "Top 3":0.61
        },
        "Players":[
            {
                "name":"Bradley Beal",
                "salary":"$36,779,530",
                "salary_percent":"26.34%"
            },
            {
                "name":"Kristaps Porzingis",
                "salary":"$34,518,067",
                "salary_percent":"24.72%"
            },
            {
                "name":"Kentavious Caldwell-Pope",
                "salary":"$14,220,151",
                "salary_percent":"10.19%"
            },
            {
                "name":"Kyle Kuzma",
                "salary":"$14,177,768",
                "salary_percent":"10.15%"
            },
            {
                "name":"Thomas Bryant",
                "salary":"$9,451,846",
                "salary_percent":"6.77%"
            }
        ]
    },
    "DAL":{
        "Team":{
            "name":"Dallas Mavericks",
            "Win %":0.634,
            "Salary Cap":"$138,175,392",
            "Top 3":0.45
        },
        "Players":[
            {
                "name":"Tim Hardaway Jr",
                "salary":"$23,237,161",
                "salary_percent":"16.82%"
            },
            {
                "name":"Spencer Dinwiddie",
                "salary":"$21,064,111",
                "salary_percent":"15.24%"
            },
            {
                "name":"Davis Bertans",
                "salary":"$17,449,561",
                "salary_percent":"12.63%"
            },
            {
                "name":"Dwight Powell",
                "salary":"$12,083,957",
                "salary_percent":"8.75%"
            },
            {
                "name":"Luka Doncic",
                "salary":"$11,096,166",
                "salary_percent":"8.03%"
            }
        ]
    },
    "DEN":{
        "Team":{
            "name":"Denver Nuggets",
            "Win %":0.585,
            "Salary Cap":"$150,463,115",
            "Top 3":0.56
        },
        "Players":[
            {
                "name":"Nikola Jokic",
                "salary":"$33,857,499",
                "salary_percent":"22.50%"
            },
            {
                "name":"Jamal Murray",
                "salary":"$32,137,511",
                "salary_percent":"21.36%"
            },
            {
                "name":"Aaron Gordon",
                "salary":"$17,895,714",
                "salary_percent":"11.89%"
            },
            {
                "name":"Will Barton",
                "salary":"$17,040,587",
                "salary_percent":"11.33%"
            },
            {
                "name":"Monte Morris",
                "salary":"$9,214,539",
                "salary_percent":"6.12%"
            }
        ]
    },
    "GSW":{
        "Team":{
            "name":"Golden State Warriors",
            "Win %":0.646,
            "Salary Cap":"$195,195,980",
            "Top 3":0.64
        },
        "Players":[
            {
                "name":"Stephen Curry",
                "salary":"$49,928,610",
                "salary_percent":"25.58%"
            },
            {
                "name":"Klay Thompson",
                "salary":"$41,421,681",
                "salary_percent":"21.22%"
            },
            {
                "name":"Andrew Wiggins",
                "salary":"$34,440,406",
                "salary_percent":"17.64%"
            },
            {
                "name":"Draymond Green",
                "salary":"$26,203,473",
                "salary_percent":"13.42%"
            },
            {
                "name":"James Wiseman",
                "salary":"$9,997,289",
                "salary_percent":"5.12%"
            }
        ]
    },
    "HOU":{
        "Team":{
            "name":"Houston Rockets",
            "Win %":0.244,
            "Salary Cap":"$144,250,150",
            "Top 3":0.58
        },
        "Players":[
            {
                "name":"John Wall",
                "salary":"$48,325,294",
                "salary_percent":"33.50%"
            },
            {
                "name":"Eric Gordon",
                "salary":"$19,869,398",
                "salary_percent":"13.77%"
            },
            {
                "name":"Christian Wood",
                "salary":"$14,904,833",
                "salary_percent":"10.33%"
            },
            {
                "name":"Jalen Green",
                "salary":"$9,806,740",
                "salary_percent":"6.80%"
            },
            {
                "name":"DJ Augustin",
                "salary":"$7,634,183",
                "salary_percent":"5.29%"
            }
        ]
    },
    "LAC":{
        "Team":{
            "name":"Los Angeles Clippers",
            "Win %":0.512,
            "Salary Cap":"$183,633,046",
            "Top 3":0.56
        },
        "Players":[
            {
                "name":"Paul George",
                "salary":"$42,909,529",
                "salary_percent":"23.37%"
            },
            {
                "name":"Kawhi Leonard",
                "salary":"$42,909,452",
                "salary_percent":"23.37%"
            },
            {
                "name":"Marcus Morris",
                "salary":"$17,043,757",
                "salary_percent":"9.28%"
            },
            {
                "name":"Norman Powell",
                "salary":"$16,923,066",
                "salary_percent":"9.22%"
            },
            {
                "name":"Luke Kennard",
                "salary":"$14,556,998",
                "salary_percent":"7.93%"
            }
        ]
    },
    "LAL":{
        "Team":{
            "name":"Los Angeles Lakers",
            "Win %":0.402,
            "Salary Cap":"$179,304,361",
            "Top 3":0.73
        },
        "Players":[
            {
                "name":"Russell Westbrook",
                "salary":"$48,216,568",
                "salary_percent":"26.89%"
            },
            {
                "name":"LeBron James",
                "salary":"$44,911,401",
                "salary_percent":"25.05%"
            },
            {
                "name":"Anthony Davis",
                "salary":"$38,565,013",
                "salary_percent":"21.51%"
            },
            {
                "name":"Talen Horton-Tucker",
                "salary":"$10,360,677",
                "salary_percent":"5.78%"
            },
            {
                "name":"Kendrick Nunn",
                "salary":"$5,452,987",
                "salary_percent":"3.04%"
            }
        ]
    },
    "MEM":{
        "Team":{
            "name":"Memphis Grizzlies",
            "Win %":0.683,
            "Salary Cap":"$127,910,133",
            "Top 3":0.33
        },
        "Players":[
            {
                "name":"Steven Adams",
                "salary":"$18,619,958",
                "salary_percent":"14.56%"
            },
            {
                "name":"Dillon Brooks",
                "salary":"$13,305,290",
                "salary_percent":"10.40%"
            },
            {
                "name":"Kyle Anderson",
                "salary":"$10,837,431",
                "salary_percent":"8.47%"
            },
            {
                "name":"Ja Morant",
                "salary":"$10,473,401",
                "salary_percent":"8.19%"
            },
            {
                "name":"Jaren Jackson Jr",
                "salary":"$10,012,296",
                "salary_percent":"7.83%"
            }
        ]
    },
    "MIN":{
        "Team":{
            "name":"Minnesota Timberwolves",
            "Win %":0.561,
            "Salary Cap":"$149,883,767",
            "Top 3":0.55
        },
        "Players":[
            {
                "name":"Karl-Anthony Towns",
                "salary":"$34,518,067",
                "salary_percent":"23.03%"
            },
            {
                "name":"D'Angelo Russell",
                "salary":"$32,732,650",
                "salary_percent":"21.84%"
            },
            {
                "name":"Malik Beasley",
                "salary":"$15,804,900",
                "salary_percent":"10.54%"
            },
            {
                "name":"Patrick Beverley",
                "salary":"$15,618,433",
                "salary_percent":"10.42%"
            },
            {
                "name":"Taurean Prince",
                "salary":"$14,542,437",
                "salary_percent":"9.70%"
            }
        ]
    },
    "NOP":{
        "Team":{
            "name":"New Orleans Pelicans",
            "Win %":0.439,
            "Salary Cap":"$148,096,563",
            "Top 3":0.55
        },
        "Players":[
            {
                "name":"CJ McCollum",
                "salary":"$33,660,419",
                "salary_percent":"22.73%"
            },
            {
                "name":"Brandon Ingram",
                "salary":"$32,137,511",
                "salary_percent":"21.70%"
            },
            {
                "name":"Jonas Valanciunas",
                "salary":"$15,268,366",
                "salary_percent":"10.31%"
            },
            {
                "name":"Devonte Graham",
                "salary":"$11,996,573",
                "salary_percent":"8.10%"
            },
            {
                "name":"Zion Williamson",
                "salary":"$11,705,820",
                "salary_percent":"7.90%"
            }
        ]
    },
    "OKC":{
        "Team":{
            "name":"Oklahoma City Thunder",
            "Win %":0.293,
            "Salary Cap":"$89,453,934",
            "Top 3":0.51
        },
        "Players":[
            {
                "name":"Kemba Walker",
                "salary":"$28,615,559",
                "salary_percent":"31.99%"
            },
            {
                "name":"Derrick Favors",
                "salary":"$10,601,590",
                "salary_percent":"11.85%"
            },
            {
                "name":"Josh Giddey",
                "salary":"$6,530,498",
                "salary_percent":"7.30%"
            },
            {
                "name":"Shai Gilgeous-Alexander",
                "salary":"$5,993,413",
                "salary_percent":"6.70%"
            },
            {
                "name":"Mike Muscala",
                "salary":"$3,817,091",
                "salary_percent":"4.27%"
            }
        ]
    },
    "PHO":{
        "Team":{
            "name":"Phoenix Suns",
            "Win %":0.78,
            "Salary Cap":"$148,840,901",
            "Top 3":0.55
        },
        "Players":[
            {
                "name":"Devin Booker",
                "salary":"$34,518,067",
                "salary_percent":"23.19%"
            },
            {
                "name":"Chris Paul",
                "salary":"$33,590,405",
                "salary_percent":"22.57%"
            },
            {
                "name":"Deandre Ayton",
                "salary":"$13,777,464",
                "salary_percent":"9.26%"
            },
            {
                "name":"Jae Crowder",
                "salary":"$10,601,590",
                "salary_percent":"7.12%"
            },
            {
                "name":"Dario Saric",
                "salary":"$9,280,985",
                "salary_percent":"6.24%"
            }
        ]
    },
    "SAC":{
        "Team":{
            "name":"Sacramento Kings",
            "Win %":0.366,
            "Salary Cap":"$142,277,004",
            "Top 3":0.51
        },
        "Players":[
            {
                "name":"De'Aaron Fox",
                "salary":"$30,649,609",
                "salary_percent":"21.54%"
            },
            {
                "name":"Harrison Barnes",
                "salary":"$22,121,780",
                "salary_percent":"15.55%"
            },
            {
                "name":"Domantas Sabonis",
                "salary":"$20,176,055",
                "salary_percent":"14.18%"
            },
            {
                "name":"Jeremy Lamb",
                "salary":"$11,451,274",
                "salary_percent":"8.05%"
            },
            {
                "name":"Richaun Holmes",
                "salary":"$11,325,310",
                "salary_percent":"7.96%"
            }
        ]
    },
    "SAS":{
        "Team":{
            "name":"San Antonio Spurs",
            "Win %":0.415,
            "Salary Cap":"$139,220,659",
            "Top 3":0.37
        },
        "Players":[
            {
                "name":"Goran Dragic",
                "salary":"$20,307,106",
                "salary_percent":"14.59%"
            },
            {
                "name":"Dejounte Murray",
                "salary":"$16,826,699",
                "salary_percent":"12.09%"
            },
            {
                "name":"Doug McDermott",
                "salary":"$14,995,716",
                "salary_percent":"10.77%"
            },
            {
                "name":"Josh Richardson",
                "salary":"$12,667,648",
                "salary_percent":"9.10%"
            },
            {
                "name":"Al-Farouq Aminu",
                "salary":"$11,106,427",
                "salary_percent":"7.98%"
            }
        ]
    },
    "UTA":{
        "Team":{
            "name":"Utah Jazz",
            "Win %":0.598,
            "Salary Cap":"$163,328,668",
            "Top 3":0.56
        },
        "Players":[
            {
                "name":"Rudy Gobert",
                "salary":"$38,546,983",
                "salary_percent":"23.60%"
            },
            {
                "name":"Donovan Mitchell",
                "salary":"$30,649,609",
                "salary_percent":"18.77%"
            },
            {
                "name":"Mike Conley",
                "salary":"$22,902,549",
                "salary_percent":"14.02%"
            },
            {
                "name":"Bojan Bogdanovic",
                "salary":"$20,394,174",
                "salary_percent":"12.49%"
            },
            {
                "name":"Jordan Clarkson",
                "salary":"$13,545,221",
                "salary_percent":"8.29%"
            }
        ]
    }    
};
'use strict';
const teamRanks = [
    // in order (index 0 is 1st, 29 is last)
    "PHO",
    "MEM",
    "GSW",
    "MIA",
    "DAL",
    "BOS",
    "MIL",
    "PHI",
    "UTA",
    "DEN",
    "TOR",
    "CHI",
    "MIN",
    "BRK",
    "CLE",
    "ATL",
    "CHO",
    "LAC",
    "NYK",
    "NOP",
    "WSH",
    "SAS",
    "LAL",
    "SAC",
    "POR",
    "IND",
    "OKC",
    "DET",
    "ORL",
    "HOU"
]


class Dropdown {
  constructor(element, options) {
    this.element = element;
    this.toggler = element.querySelector('.js-dropdown-toggler');
    this.title = element.querySelector('.js-dropdown-title');
    this.icon = element.querySelector('.js-dropdown-icon');
    this.choices = element.querySelectorAll('.js-dropdown-choice');
    this.paragraph = document.getElementById("team-story");
    this.paragraph2 = document.getElementById("team-story2");
    this.paragraph3 = document.getElementById("team-story3");
    this.imageVis = document.getElementById("pie-chart");
    this.classActive = options.cssElementActive || 'js-dropdown-active';
    this.classExpanded = options.cssElementExpanded || 'js-dropdown-expanded';
    
    this.modes = Array.prototype.map.call(this.choices, choice => choice.dataset['mode']);
    
    if (!this.element || !this.toggler || !this.title || !this.icon || !this.choices.length) {
      throw new Error('Something is missing! Check the layout!');
    }
    
    this.init();
  }
  
  init() {
    this.toggler.addEventListener('click', this.toggleExpanded.bind(this));
    Array.prototype.forEach.call(this.choices, choice => {
      choice.addEventListener('click', this.choose.bind(this));
    });
    
  }
  
  toggleExpanded() {
    if (!this.element.classList.contains(this.classExpanded) || !this.element.classList.contains('js-dropdown-expanded')) {
      this.setExpanded();
    } else {
      this.unsetExpanded();
    }
  }
  
  setExpanded() {
    this.element.classList.add(this.classExpanded, 'js-dropdown-expanded');
  }
  
  unsetExpanded() {
    this.element.classList.remove(this.classExpanded, 'js-dropdown-expanded');
  }
  
  choose(event) {
    console.log(event);
    const mode = event.target.dataset['mode'];
    const title = event.target.innerHTML;
    
    this.activate();
    this.setTitle(title);
    this.colorize(mode);
    this.setIcon(mode);
    this.updateText(mode);
    this.toggleExpanded();

  }
  
  activate() {
    this.element.classList.add(this.classActive, 'js-dropdown-active');
  }
  
  setTitle(title) {
    this.title.innerHTML = title;
  }
  
  colorize(mode) {
    Array.prototype.forEach.call(this.modes, item => { this.toggler.classList.remove(`dropdown__header_${item}`); });
    this.toggler.classList.add(`dropdown__header_${mode}`);
  }
  
  setIcon(mode) {
    Array.prototype.forEach.call(this.modes, item => { this.icon.classList.remove(`fa-${item}`); });
    this.icon.classList.add(`fa-${mode}`);
  }
  updateText(mode){
    var team = teamData[mode]["Team"];
    var players = teamData[mode]["Players"]
    var curRank = teamRanks.findIndex(t => t == mode);
    var usefulPlayers = "";
    console.log(team);
    if (team["Win %"] > 0.5){
        usefulPlayers = "money makers";
    }else{
        usefulPlayers = "financial burdens";
    }
    this.imageVis.src = `./pics/${mode}.png`
    this.paragraph.textContent = `During the 2021-2022 season the ${team['name']} spent a whopping ${team['Salary Cap']} on their way to finish in ${curRank} 
    place with a ${team['Win %']} win percentage. They spent ${team['Top 3']*100}% 
    of their ${team['Salary Cap']} on their biggest ${usefulPlayers}, who were ${players[0]['name']}, ${players[1]['name']}, ${players[2]['name']}. 
    `;
    this.paragraph2.textContent = `It could always be worse, you could be the ${teamData[teamRanks[curRank+1]]['Team']['name']}, but the ${team.name} 
    have some work to do before they beat the ${teamData[teamRanks[curRank-1]]['Team']['name']}.`;
  }
}


function initDropdown(options) {
  const dropdown = [];
  Array.prototype.forEach.call(document.querySelectorAll('.js-dropdown'), (item) => {
    dropdown.push(new Dropdown(item, options));
  });
}

initDropdown({ 
  cssElementActive: 'is-active',
  cssElementExpanded: 'is-expanded',
});

function updateFigure(){
    var figure = d3.select("figure");
    figure.insert("div").class("flourish-embed flourish-chart");
}

/* side-saddle-scrollytelling-code*/

const container = d3.select('#team-scrolly');
const stepSel = container.select(".text-container").selectAll('.step');

function updateChart(index) {
    console.log(index);
  const sel = container.select(`[data-index='${index}']`);
  stepSel.classed('is-active', (d, i) => i === index);
  switch(index){
      case 0:{
        container.select("#pie-chart").style("display","block");
        break;
      }
      case 1:{
          container.select("#pie-chart").style("display","none");
          container.select("#chart1").style("display","block");
          break;
        }
        case 2:{
          container.select("#pie-chart").style("display","none");
          container.select("#chart1").style("display","none");
          container.select("#chart2").style("display","block");
          break;
        }
        case 3:{
        container.select("#pie-chart").style("display","none");
        container.select("#chart1").style("display","none");
        container.select("#chart2").style("display","none");
        container.select("#chart3").style("display","block");

            break;
        }
  }
}

function scrollyInit() {
  Stickyfill.add(d3.select('.sticky').node());

  enterView({
    selector: stepSel.nodes(),
    offset: 0.5,
    enter: el => {
      const index = +d3.select(el).attr('data-index');
      updateChart(index);
    },
    exit: el => {
      let index = +d3.select(el).attr('data-index');
      index = Math.max(0, index - 1);
      updateChart(index);
    } });

}

scrollyInit();



